# イベントモデル（ツクール型）

## 確定事項（RPGツクールMZの data/ 解析より）
- マップファイル（MapXXX.json）は「タイルデータ」と「イベント集合」を持つ
- イベントは複数の「ページ」を持つ
- ページは「条件（conditions）」と「コマンド列（list）」で構成される
- コマンドは「code（命令ID）＋parameters（引数）＋indent（ネスト）」で表現される
- 共通イベント（CommonEvents.json）はマップ非依存で、条件成立時に発火する

## MOTHER2向け採用方針
- ツクール型 Event/Page/Command モデルを内部表現として採用
- MOTHER2イベント命令をツクール型コマンドへマッピングする
- ページ条件からルートグラフ（到達性）を自動生成する

## 現状の解析まとめ（スナップショット）

### 確定事項（RPGツクールMZ data/ 解析）
- マップ（MapXXX.json）は「タイルデータ」と「イベント集合」を分離して保持する
- イベントは複数ページを持ち、**条件を満たす最上位ページ**が有効
- ページは「Conditions + Commands(list)」で構成される
- Commandは「code（命令ID）/ parameters（引数）/ indent（ネスト）」で表現される
- 共通イベント（CommonEvents.json）はマップ非依存で、スイッチ等の条件成立時に発火する
- System.json はスイッチ/変数の**名前辞書**と開始地点を提供する
- MapInfos.json は**マップ一覧（ツリーUI）**を作るためのメタ情報を提供する

### MOTHER2向け設計方針（確定）
- 内部表現は **ツクール型 Event → Pages → Commands** を採用
- MOTHER2のイベント命令は、ツクール型コマンド（type + args）にマッピングする
- ページ条件から **ルートグラフ（到達性）** を自動生成する
- 危険操作（圧縮/ポインタ/LoROM境界）は編集時に **WARN/BLOCK** を出す
